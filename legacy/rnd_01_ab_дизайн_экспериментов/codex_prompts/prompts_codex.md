# Лучшие промпты для Codex (рабочий набор)

Ниже — практичные шаблоны, которые стабильно дают качественный результат в задачах разработки и RnD.

## 1) Глубокий анализ репозитория перед изменениями
```text
Проанализируй репозиторий перед изменениями.

Цель:
- Понять текущую архитектуру и зависимости.
- Найти файлы, которые обязательно обновить вместе с основной задачей.
- Сформировать короткий план работ.

Сделай:
1. Краткую карту структуры проекта.
2. Перечень рисков при изменении.
3. Пошаговый план (3–7 шагов).
4. Список проверок, которые нужно запустить после изменений.

Ограничения:
- Не делать правки, только анализ и план.
- Сначала минимально необходимый набор файлов, без лишнего чтения.
```

## 2) Точное внесение изменений без побочных эффектов
```text
Внеси изменения строго по ТЗ и минимально затронь кодовую базу.

ТЗ:
<вставь задачу>

Требования:
- Сохрани обратную совместимость.
- Не меняй публичные интерфейсы без явной необходимости.
- Обнови документацию, где упоминается изменяемое поведение.
- Добавь/обнови тесты только для реально измененной логики.

Формат ответа:
1. Что изменено.
2. Почему именно так.
3. Какие риски остались.
4. Какие команды проверки запущены.
```

## 3) Дебаг по симптомам (когда причина неизвестна)
```text
Найди причину проблемы по симптомам и исправь её.

Симптомы:
<логи/ошибка/поведение>

Сделай:
1. Построй 3–5 гипотез причин.
2. Быстро сузь до наиболее вероятной через проверки.
3. Исправь корневую причину (не временный workaround).
4. Добавь регрессионную проверку.
5. Кратко опиши, почему баг возник и как предотвращён повтор.

Важно:
- Не маскируй ошибку broad-exception обработкой.
- Не отключай тесты/линтеры ради «зелёного» статуса.
```

## 4) Безопасный рефакторинг
```text
Сделай рефакторинг без изменения поведения.

Цель рефакторинга:
<что улучшить>

Условия:
- Функциональное поведение должно остаться прежним.
- Повысить читаемость и упростить сопровождение.
- Покрыть критические ветки тестами, если их нет.

Ожидаю:
1. Небольшие атомарные изменения.
2. Ясные имена и удаление дублирования.
3. Отчёт: «до/после», что стало проще и почему.
```

## 5) Подготовка качественного PR
```text
Собери PR-пакет после выполнения задачи.

Нужно:
- Предложить понятный заголовок PR.
- Написать структурированное описание: контекст, изменения, риски, проверки.
- Отдельно перечислить команды, которые были запущены.
- Указать, что проверялось вручную.

Тон:
- Кратко, по делу, без воды.
- Акцент на воспроизводимость и проверяемость.
```

## 6) Создание воспроизводимого RnD-артефакта
```text
Оформи результат исследования как воспроизводимый RnD-артефакт.

Нужно:
1. Короткий отчёт с выводами.
2. Код симуляции/эксперимента (читаемый, с фиксированным seed).
3. Инструкцию запуска.
4. Ссылки из отчёта на код и артефакты.

Критерии качества:
- Любой участник команды может повторить результат с нуля.
- Выводы в отчёте соответствуют получаемым артефактам.
```

## 7) Сильный «мета-промпт» для сложных задач
```text
Работай как senior-инженер и reviewer одновременно.

Перед изменениями:
- Сделай краткий план.
- Подсвети неочевидные зависимости.

Во время изменений:
- Придерживайся минимального diff.
- Обновляй связанную документацию.

После изменений:
- Запусти релевантные проверки.
- Дай краткий отчёт: что сделано, чем подтверждено, что осталось вне scope.

Если данных недостаточно:
- Явно перечисли недостающие входные данные и предложи безопасный дефолтный вариант.
```
