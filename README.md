# R&D репозиторий по дизайну A/B-экспериментов

Сейчас в репозитории реализован **один полноценный RnD**: `rnd_01_ab_дизайн_экспериментов/`.
Ранее накопленные материалы объединены в него как части одного исследования.

Дополнительные RnD пока не реализованы и вынесены в отдельный раздел-плейсхолдер `planned_rnd/`.

## Актуальная структура

- `rnd_01_ab_дизайн_экспериментов/` — текущий реализованный RnD.
  - `01_статьи_и_математика/`
    - `report.md` — теоретический обзор (формулы, источники, связи с кодом).
    - `analysis.ipynb` — расчёты по росту вероятности ложных находок.
  - `02_множественные_проверки/`
    - `report.md` — рекомендации по корректировкам в финальном анализе.
    - `analysis.ipynb` — демо Bonferroni и Benjamini–Hochberg.
  - `03_рерандомизация/`
    - `report.md` / `report.pdf` — отчёт по балансировке и рерандомизации.
    - `analysis.ipynb` — демо по риску ложного сигнала.
    - `simulation.py` — воспроизводимая симуляция правил приемки сплита.
    - `simulation_results.csv` — пример результатов симуляций.
  - `04_план_внедрения/`
    - `report.md` — операционный план внедрения.
    - `analysis.ipynb` — чек-лист подготовки эксперимента.
  - `codex_prompts/`
    - `prompts_codex.md` — набор лучших практических промптов для Codex.
    - `report.md` — краткий отчёт по библиотеке промптов.
- `planned_rnd/`
  - `README.md` — как добавлять будущие RnD и какой минимальный состав хранить.
- `tools/`
  - `execute_notebooks.py` — выполняет все ноутбуки в `rnd_*/**/*.ipynb` и сохраняет output.
  - `generate_pdf.py` — пересобирает `rnd_01_ab_дизайн_экспериментов/03_рерандомизация/report.pdf`.
- `requirements.txt` — базовые зависимости для работы с Jupyter.
- `AGENTS.md` — правила ведения репозитория.

## Как воспроизводить

### 1) Установить зависимости
```bash
pip install -r requirements.txt
```

### 2) Выполнить все ноутбуки
```bash
python tools/execute_notebooks.py
```

### 3) Запустить симуляцию рерандомизации
```bash
python rnd_01_ab_дизайн_экспериментов/03_рерандомизация/simulation.py --n-iter 500 --n 500 --feature-grid 5,10,20,50 --output rnd_01_ab_дизайн_экспериментов/03_рерандомизация/simulation_results.csv
```

### 4) Пересобрать PDF-отчёт
```bash
python tools/generate_pdf.py
```

## Где лежат лучшие промпты для Codex

Используй каталог:
- `rnd_01_ab_дизайн_экспериментов/codex_prompts/prompts_codex.md`

Рекомендуется выбирать шаблон под задачу (анализ, дебаг, рефакторинг, PR) и подставлять контекст проекта и ограничения.

## Принципы оформления
- Отчёты и комментарии в коде — на русском языке.
- В отчётах есть ссылки на соответствующие элементы кода.
- Ноутбуки коммитятся только в исполненном состоянии (с обновлёнными output).
